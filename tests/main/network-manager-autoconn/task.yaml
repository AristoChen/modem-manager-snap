summary: Test modem-manager snap installation was successful

execute: |
    . $TESTSLIB/utilities.sh

    # Service should be up an running
    wait_for_modem_manager

    snap install --channel=20/stable network-manager

    # Ensure all necessary plugs/slots are connected
    snap connections modem-manager | grep -Ezq "modem-manager:mmcli .*modem-manager:service"
    snap connections modem-manager | grep -Ezq "network-manager:modem-manager .*modem-manager:service"

    # Set renderer back to networkd
    snap set network-manager defaultrenderer=false
    sleep 2
