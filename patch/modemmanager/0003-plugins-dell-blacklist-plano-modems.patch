From 7c72aa549b70a469684a795b9c47c59b575a832f Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Alfonso=20S=C3=A1nchez-Beato?=
 <alfonsosanchezbeato@yahoo.es>
Date: Tue, 8 Nov 2016 12:42:51 +0100
Subject: [PATCH 03/17] plugins: dell: blacklist plano modems

---
 plugins/dell/mm-plugin-dell.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/plugins/dell/mm-plugin-dell.c b/plugins/dell/mm-plugin-dell.c
index c6085f9..4e528cc 100644
--- a/plugins/dell/mm-plugin-dell.c
+++ b/plugins/dell/mm-plugin-dell.c
@@ -498,6 +498,10 @@ mm_plugin_create (void)
 {
     static const gchar *subsystems[] = { "tty", "net", "usb", NULL };
     static const guint16 vendors[] = { 0x413c, 0 };
+    static const mm_uint16_pair forbidden_products[] = { { 0x413c, 0x81ba }, /* Dell/plano */
+                                                         { 0x413c, 0x81bb }, /* Dell/plano */
+                                                         { 0x413c, 0x81bc }, /* Dell/plano */
+                                                         { 0, 0 } };
     static const MMAsyncMethod custom_init = {
         .async  = G_CALLBACK (dell_custom_init),
         .finish = G_CALLBACK (dell_custom_init_finish),
@@ -508,6 +512,7 @@ mm_plugin_create (void)
                       MM_PLUGIN_NAME,               "Dell",
                       MM_PLUGIN_ALLOWED_SUBSYSTEMS, subsystems,
                       MM_PLUGIN_ALLOWED_VENDOR_IDS, vendors,
+                      MM_PLUGIN_FORBIDDEN_PRODUCT_IDS, forbidden_products,
                       MM_PLUGIN_ALLOWED_AT,         TRUE,
                       MM_PLUGIN_CUSTOM_INIT,        &custom_init,
                       MM_PLUGIN_ALLOWED_QCDM,       TRUE,
-- 
2.17.1

